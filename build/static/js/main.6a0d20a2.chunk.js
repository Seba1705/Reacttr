(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){e.exports=a(61)},50:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(26),l=a.n(r),o=a(7),c=a.n(o),i=(a(50),a(51),a(9)),u=a(10),m=a(13),p=a(11),d=a(14),f=a(12),h=a(8);function v(){return s.a.createElement("header",{className:"header"},s.a.createElement("h1",{className:"logo"},"Reacttr"))}var E=a(28),N=a.n(E),b=a(29),g=a.n(b),w=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={pressFavorite:!1,pressRetweet:!1},a.onPressFavorite=function(){a.props.onFavorite(),a.setState({pressFavorite:!0})},a.onPressRetweet=function(){a.props.onRetweet(),a.setState({pressRetweet:!0})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=g()(this.props.date).fromNow(),t="/user/".concat(this.props.username);return s.a.createElement("div",{className:"message mt-3"},s.a.createElement("div",{className:"user"},s.a.createElement(f.b,{to:t},s.a.createElement("figure",null,s.a.createElement("img",{className:"avatar",src:this.props.picture,alt:""}))),s.a.createElement("span",{className:"displayName"},this.props.displayName),s.a.createElement("span",{className:"username"},this.props.username),s.a.createElement("span",{className:"date"},e)),s.a.createElement("h3",null,this.props.text),s.a.createElement("div",{className:"buttons"},s.a.createElement("div",{className:"icon",onClick:this.props.onReplyTweet},s.a.createElement("span",{className:"fa fa-reply"})),s.a.createElement("div",{className:this.state.pressRetweet?"rtGreen":"",onClick:this.onPressRetweet},s.a.createElement("span",{className:"fa fa-retweet"}),s.a.createElement("span",{className:"numero"},this.props.numRetweets)),s.a.createElement("div",{className:this.state.pressFavorite?"favYellow":"",onClick:this.onPressFavorite},s.a.createElement("span",{className:"fa fa-star"}),s.a.createElement("span",{className:"numero"},this.props.numFavorites))))}}]),t}(n.Component);function y(e){var t=e.messages,a=e.onRetweet,n=e.onFavorite,r=e.onReplyTweet;return s.a.createElement("div",{className:"list"},t.map(function(e){return s.a.createElement(w,{key:e.id,text:e.text,picture:e.picture,displayName:e.displayName,username:e.username,date:e.date,numRetweets:e.retweets,numFavorites:e.favorites,onRetweet:function(){return a(e.id)},onFavorite:function(){return n(e.id)},onReplyTweet:function(){return r(e.id,e.username)}})}).reverse())}function x(e){var t=e.onSendText,a=e.userNameToReply,n=e.onCloseText;return s.a.createElement("form",{className:"form",method:"post",onSubmit:t},s.a.createElement("div",{className:"form-group"},s.a.createElement("textarea",{className:"form-control text-it",name:"text",rows:"5"},a?"@".concat(a," "):"")),s.a.createElement("div",{className:"buttons-it"},s.a.createElement("button",{className:"close",onClick:n},"Cerrar"),s.a.createElement("button",{className:"send",type:"submit"},"Enviar")))}function T(e){var t=e.picture,a=e.username,n=e.onOpenText,r=e.onLogout;return s.a.createElement("div",{className:"profileBar d-flex justify-content-between"},s.a.createElement("div",{className:"d-flex align-items-center"},s.a.createElement(f.b,{to:"/profile"},s.a.createElement("figure",null,s.a.createElement("img",{className:"avatar mr-2",src:t,alt:""}))),s.a.createElement("span",{className:"username-pb"}," Hola @",a,"!")),s.a.createElement("div",{className:"buttons-it"},s.a.createElement("button",{onClick:n,className:"button mr-3"},s.a.createElement("span",{className:"fa fa-lg fa-edit"})," Tweet!"),s.a.createElement("button",{onClick:r,className:"button"},s.a.createElement("span",{className:"fa fa-sign-out"}),"Salir")))}var R=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={user:Object.assign({},a.props.user,{retweets:[]},{favorites:[]}),openText:!1,userNameToReply:"",messages:[]},a.handleOpenText=function(e){e.preventDefault(),a.setState({openText:!0})},a.handleCloseText=function(e){e.preventDefault(),a.setState({openText:!1})},a.handleSendText=function(e){e.preventDefault();var t={id:N.a.v4(),username:a.state.user.email.split("@")[0],displayName:a.state.user.displayName,picture:a.state.user.photoURL,date:Date.now(),text:e.target.text.value,favorites:0,retweets:0};c.a.database().ref().child("messages").push().set(t)},a.handleRetweet=function(e){if(0===a.state.user.retweets.filter(function(t){return t===e}).length){var t=a.state.messages.map(function(t){return t.id===e&&t.retweets++,t}),n=Object.assign({},a.state.user);n.retweets.push(e),a.setState({messages:t,user:n})}},a.handleFavorite=function(e){if(0===a.state.user.favorites.filter(function(t){return t===e}).length){var t=a.state.messages.map(function(t){return t.id===e&&t.favorites++,t}),n=Object.assign({},a.state.user);n.favorites.push(e),a.setState({messages:t,user:n})}},a.renderOpenText=function(){if(a.state.openText)return s.a.createElement(x,{onSendText:a.handleSendText,onCloseText:a.handleCloseText,userNameToReply:a.state.userNameToReply})},a.handleReplyTweet=function(e,t){a.setState({openText:!0,userNameToReply:t})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;c.a.database().ref().child("messages").on("child_added",function(t){e.setState({messages:e.state.messages.concat(t.val()),openText:!1})})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(T,{picture:this.props.user.photoURL,username:this.props.user.email.split("@")[0],onOpenText:this.handleOpenText,onLogout:this.props.onLogout}),this.renderOpenText(),s.a.createElement(y,{messages:this.state.messages,onRetweet:this.handleRetweet,onFavorite:this.handleFavorite,onReplyTweet:this.handleReplyTweet}))}}]),t}(n.Component);function O(e){var t=e.picture,a=e.displayName,n=e.username,r=e.emailAddress,l=e.location;return s.a.createElement("div",{className:"profile"},s.a.createElement("img",{className:"avatar-profile",src:t,alt:""}),s.a.createElement("span",{className:"name"},a),s.a.createElement("ul",{className:"data"},s.a.createElement("li",null,s.a.createElement("span",{className:"fa fa-user mr-2"}),n),s.a.createElement("li",null,s.a.createElement("span",{className:"fa fa-envelope mr-2"}),r),s.a.createElement("li",null,s.a.createElement("span",{className:"fa fa-map-marker mr-2"}),l)))}function j(e){var t=e.onAuth;return s.a.createElement("div",{className:"login"},s.a.createElement("p",{className:"text-login"},"Necesitamos que inicies sesion con tu cuenta de GitHub para que puedas leer y escribir mensajes"),s.a.createElement("button",{onClick:t,className:"button-login"},s.a.createElement("span",{className:"fa fa-github",style:{margin:5}})," Login con Github"))}var k=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={user:null},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;c.a.auth().onAuthStateChanged(function(t){t?e.setState({user:t}):e.setState({user:null})})}},{key:"handleOnAuth",value:function(){var e=new c.a.auth.GithubAuthProvider;c.a.auth().signInWithPopup(e).then(function(e){return console.log("".concat(e.user.email," ha iniciado sesi\xf3n"))}).catch(function(e){return console.error("Error: ".concat(e.code,": ").concat(e.message))})}},{key:"handleLogout",value:function(){c.a.auth().signOut().then(function(){return console.log("Te has desconenctado correctamente")}).catch(function(){return console.error("Ha ocurrido un error")})}},{key:"render",value:function(){var e=this;return s.a.createElement(f.a,null,s.a.createElement("div",{className:"container-fluid mt-3"},s.a.createElement(v,null),s.a.createElement(h.c,null,s.a.createElement(h.a,{path:"/",exact:!0,render:function(){return e.state.user?s.a.createElement(R,{user:e.state.user,onLogout:e.handleLogout}):s.a.createElement(j,{onAuth:e.handleOnAuth})}}),s.a.createElement(h.a,{path:"/profile",render:function(){return s.a.createElement(O,{picture:e.state.user.photoURL,username:e.state.user.email.split("@")[0],displayName:e.state.user.displayName,location:e.state.user.location,emailAddress:e.state.user.email})}}),s.a.createElement(h.a,{path:"/user/:username",render:function(e){var t=e.location;return s.a.createElement(O,{username:t.pathname.split("/")[2]})}}))))}}]),t}(n.Component);c.a.initializeApp({apiKey:"AIzaSyATM2zGkouyFvapAPsXKONrnbKrrZFExUE",authDomain:"sebastian-reacttr.firebaseapp.com",databaseURL:"https://sebastian-reacttr.firebaseio.com",projectId:"sebastian-reacttr",storageBucket:"",messagingSenderId:"1054263410598",appId:"1:1054263410598:web:e7b5c39d7a04771b"}),l.a.render(s.a.createElement(k,null),document.querySelector("#root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.6a0d20a2.chunk.js.map